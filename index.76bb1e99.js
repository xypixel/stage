class t{constructor(t,e){this.x=t,this.y=e}}var e,n;(n=e||(e={})).Up="Up",n.Lt="Lt",n.Dn="Dn",n.Rt="Rt",n.Center="Center",n.LtUp="LtUp",n.LtDn="LtDn",n.RtUp="RtUp",n.RtDn="RtDn";const s=new class{constructor(){this.dPadButtons=[{name:e.LtUp,isPressed:!1,element:null},{name:e.Up,isPressed:!1,element:null},{name:e.RtUp,isPressed:!1,element:null},{name:e.Lt,isPressed:!1,element:null},{name:e.Center,isPressed:!1,element:null},{name:e.Rt,isPressed:!1,element:null},{name:e.LtDn,isPressed:!1,element:null},{name:e.Dn,isPressed:!1,element:null},{name:e.RtDn,isPressed:!1,element:null}],this.dPadElement=document.querySelector("#dPad"),this.dPadButtons.forEach((t=>{t.element=document.querySelector(`#${t.name}`)})),this.actionBtnIElement=document.querySelector("#actionBtnI"),this.actionBtnIIElement=document.querySelector("#actionBtnII"),this.dPadElement.addEventListener("touchstart",(t=>{this.setActiveDPadElements(this.dPadButtons.find((e=>e.name===t.target.id)))}),!1),this.dPadElement.addEventListener("touchmove",(e=>{e.preventDefault(),this.dPadButtons.forEach((t=>{t.element?.classList.remove("active")}));const n=e.touches[0];this.dPadButtons.forEach((e=>{var s,i;s=new t(n.pageX,n.pageY),i=e.element.getBoundingClientRect(),s.x>i.x&&s.x<i.right&&s.y>i.y&&s.y<i.bottom&&this.setActiveDPadElements(e)}))}),!1),this.dPadElement.addEventListener("touchend",(t=>{this.dPadButtons.forEach((t=>{t.element?.classList.remove("active")}))}),!1),this.actionBtnIElement.addEventListener("touchstart",(t=>{t.target.classList.add("active")}),!1),this.actionBtnIElement.addEventListener("touchmove",(t=>{t.preventDefault()}),!1),this.actionBtnIElement.addEventListener("touchend",(t=>{t.target.classList.remove("active")}),!1),this.actionBtnIIElement.addEventListener("touchstart",(t=>{t.target.classList.add("active")}),!1),this.actionBtnIIElement.addEventListener("touchmove",(t=>{t.preventDefault()}),!1),this.actionBtnIIElement.addEventListener("touchend",(t=>{t.target.classList.remove("active")}),!1)}setActiveDPadElements(t){t.name===e.LtUp?(this.dPadButtons.find((t=>t.name===e.Lt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===e.Up))?.element?.classList.add("active")):t.name===e.RtUp?(this.dPadButtons.find((t=>t.name===e.Rt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===e.Up))?.element?.classList.add("active")):t.name===e.LtDn?(this.dPadButtons.find((t=>t.name===e.Lt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===e.Dn))?.element?.classList.add("active")):t.name===e.RtDn?(this.dPadButtons.find((t=>t.name===e.Rt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===e.Dn))?.element?.classList.add("active")):t.element?.classList.add("active")}},i=new class{constructor(){this.dimensions=256,this.pixelScale=1,this.antiAliasingScaleThreshold=4,this.element=document.querySelector("#screen"),this.context=this.element.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.imageSmoothingQuality="low"}setPixelScale(t){const e=t/this.dimensions;this.pixelScale=e>this.antiAliasingScaleThreshold?Math.floor(e):e}};new class{constructor(t){this.calculatedScreenDimensions=256,this.screen=t.screen,this.buttons=t.buttons,this.leftConElement=document.querySelector("#leftCon"),this.rightConElement=document.querySelector("#rightCon"),document.addEventListener("contextmenu",(t=>t.preventDefault())),this.calculatePositionAndScale(),window.addEventListener("resize",(()=>{this.calculatePositionAndScale()}),!1),window.addEventListener("deviceorientation",(()=>{this.calculatePositionAndScale()}),!1)}calculatePositionAndScale(){const t=window.innerWidth,e=window.innerHeight,n=t>e;this.calculatedScreenDimensions=Math.floor(n?t/e<2?t/2:e:e/t<2?e/2:t),this.screen.setPixelScale(this.calculatedScreenDimensions),this.calculatedScreenDimensions/this.screen.dimensions>this.screen.pixelScale&&(this.calculatedScreenDimensions=this.screen.dimensions*this.screen.pixelScale),this.screen.element.width=this.calculatedScreenDimensions,this.screen.element.height=this.calculatedScreenDimensions,this.positionAndScaleElements(t,e,n)}positionAndScaleElements(t,e,n){const s=t/2-this.calculatedScreenDimensions/2,i=e/2-(n?this.calculatedScreenDimensions/2:this.calculatedScreenDimensions),l=n?s-this.calculatedScreenDimensions/2:s,a=n?i:i+this.calculatedScreenDimensions,c=n?s+this.calculatedScreenDimensions:s+this.calculatedScreenDimensions/2,o=n?i:i+this.calculatedScreenDimensions,d=this.calculatedScreenDimensions/2,h=this.calculatedScreenDimensions,m=d/1.6,r=m/3,u=l+d/2-m/2,p=a+h/2-m/2;(()=>{let t=0,e=0;this.buttons.dPadButtons.forEach((n=>{n.element.style.left=t*r+"px",n.element.style.top=e*r+"px",n.element.style.width=`${r}px`,n.element.style.height=`${r}px`,e=2===t?e+1:e,t=2!==t?t+1:0}))})();const E=d/3.6,P=d/9,x=c+d/2,v=o+h/2;this.screen.element.style.left=`${s}px`,this.screen.element.style.top=`${i}px`,this.buttons.dPadElement.style.left=`${u}px`,this.buttons.dPadElement.style.top=`${p}px`,this.buttons.dPadElement.style.width=`${m}px`,this.buttons.dPadElement.style.height=`${m}px`,this.buttons.dPadElement.style.left=`${u}px`,this.buttons.dPadElement.style.top=`${p}px`,this.buttons.dPadElement.style.width=`${m}px`,this.buttons.dPadElement.style.height=`${m}px`,this.buttons.actionBtnIElement.style.left=x-P/2-E+"px",this.buttons.actionBtnIElement.style.top=`${v}px`,this.buttons.actionBtnIElement.style.width=`${E}px`,this.buttons.actionBtnIElement.style.height=`${E}px`,this.buttons.actionBtnIIElement.style.left=`${x+P/2}px`,this.buttons.actionBtnIIElement.style.top=v-E+"px",this.buttons.actionBtnIIElement.style.width=`${E}px`,this.buttons.actionBtnIIElement.style.height=`${E}px`,this.leftConElement.style.left=`${l}px`,this.leftConElement.style.top=`${a}px`,this.leftConElement.style.width=`${d}px`,this.leftConElement.style.height=`${h}px`,this.rightConElement.style.left=`${c}px`,this.rightConElement.style.top=`${o}px`,this.rightConElement.style.width=`${d}px`,this.rightConElement.style.height=`${h}px`}}({buttons:s,screen:i});
//# sourceMappingURL=index.76bb1e99.js.map
