function t(t,e){return t.x>e.x&&t.x<e.right&&t.y>e.y&&t.y<e.bottom}class e{constructor(t,e){this.x=t,this.y=e}}var n,s;(s=n||(n={})).Up="Up",s.Lt="Lt",s.Dn="Dn",s.Rt="Rt",s.Center="Center",s.LtUp="LtUp",s.LtDn="LtDn",s.RtUp="RtUp",s.RtDn="RtDn";const i=new class{constructor(){this.dPadButtons=[{name:n.LtUp,element:null},{name:n.Up,element:null},{name:n.RtUp,element:null},{name:n.Lt,element:null},{name:n.Center,element:null},{name:n.Rt,element:null},{name:n.LtDn,element:null},{name:n.Dn,element:null},{name:n.RtDn,element:null}],this.isLtUpPressed=!1,this.isUpPressed=!1,this.isRtUpPressed=!1,this.isLtPressed=!1,this.isRtPressed=!1,this.isLtDnPressed=!1,this.isDnPressed=!1,this.isRtDnPressed=!1,this.dPadElement=document.querySelector("#dPad"),this.dPadButtons.forEach((t=>{t.element=document.querySelector(`#${t.name}`)})),this.actionBtnsElement=document.querySelector("#actionBtns"),this.actionBtnIElement=document.querySelector("#actionBtnI"),this.actionBtnIIElement=document.querySelector("#actionBtnII"),this.dPadElement.addEventListener("touchstart",(t=>{this.setActiveDPadElements(this.dPadButtons.find((e=>e.name===t.target.id)))}),!1),this.dPadElement.addEventListener("touchmove",(n=>{n.preventDefault(),this.dPadButtons.forEach((t=>{t.element?.classList.remove("active")}));const s=n.touches[0];this.dPadButtons.forEach((n=>{t(new e(s.pageX,s.pageY),n.element.getBoundingClientRect())&&this.setActiveDPadElements(n)}))}),!1),this.dPadElement.addEventListener("touchend",(t=>{this.dPadButtons.forEach((t=>{t.element?.classList.remove("active")}))}),!1),this.actionBtnsElement.addEventListener("touchstart",(t=>{t.target.classList.add("active")}),!1),this.actionBtnsElement.addEventListener("touchmove",(n=>{n.preventDefault();const s=n.touches[0];this.actionBtnIElement.classList.remove("active"),this.actionBtnIIElement.classList.remove("active"),t(new e(s.pageX,s.pageY),this.actionBtnIElement.getBoundingClientRect())?this.actionBtnIElement.classList.add("active"):t(new e(s.pageX,s.pageY),this.actionBtnIIElement.getBoundingClientRect())&&this.actionBtnIIElement.classList.add("active")}),!1),this.actionBtnsElement.addEventListener("touchend",(t=>{t.target.classList.remove("active")}),!1)}setActiveDPadElements(t){t.name===n.LtUp?(this.dPadButtons.find((t=>t.name===n.Lt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===n.Up))?.element?.classList.add("active")):t.name===n.RtUp?(this.dPadButtons.find((t=>t.name===n.Rt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===n.Up))?.element?.classList.add("active")):t.name===n.LtDn?(this.dPadButtons.find((t=>t.name===n.Lt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===n.Dn))?.element?.classList.add("active")):t.name===n.RtDn?(this.dPadButtons.find((t=>t.name===n.Rt))?.element?.classList.add("active"),this.dPadButtons.find((t=>t.name===n.Dn))?.element?.classList.add("active")):t.element?.classList.add("active")}},l=new class{constructor(){this.dimensions=256,this.pixelScale=1,this.antiAliasingScaleThreshold=4,this.element=document.querySelector("#screen"),this.context=this.element.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.imageSmoothingQuality="low"}setPixelScale(t){const e=t/this.dimensions;this.pixelScale=e>this.antiAliasingScaleThreshold?Math.floor(e):e}};new class{constructor(t){this.calculatedScreenDimensions=256,this.screen=t.screen,this.buttons=t.buttons,this.leftConElement=document.querySelector("#leftCon"),this.rightConElement=document.querySelector("#rightCon"),document.addEventListener("contextmenu",(t=>t.preventDefault())),this.calculatePositionAndScale(),window.addEventListener("resize",(()=>{this.calculatePositionAndScale()}),!1),window.addEventListener("deviceorientation",(()=>{this.calculatePositionAndScale()}),!1)}calculatePositionAndScale(){const t=window.innerWidth,e=window.innerHeight,n=t>e;this.calculatedScreenDimensions=Math.floor(n?t/e<2?t/2:e:e/t<2?e/2:t),this.screen.setPixelScale(this.calculatedScreenDimensions),this.calculatedScreenDimensions/this.screen.dimensions>this.screen.pixelScale&&(this.calculatedScreenDimensions=this.screen.dimensions*this.screen.pixelScale),this.screen.element.width=this.calculatedScreenDimensions,this.screen.element.height=this.calculatedScreenDimensions,this.positionAndScaleElements(t,e,n)}positionAndScaleElements(t,e,n){const s=t/2-this.calculatedScreenDimensions/2,i=e/2-(n?this.calculatedScreenDimensions/2:this.calculatedScreenDimensions),l=n?s-this.calculatedScreenDimensions/2:s,a=n?i:i+this.calculatedScreenDimensions,c=n?s+this.calculatedScreenDimensions:s+this.calculatedScreenDimensions/2,o=n?i:i+this.calculatedScreenDimensions,d=this.calculatedScreenDimensions/2,h=this.calculatedScreenDimensions,m=d/1.5,r=m/3,u=l+d/2-m/2,p=a+h/2-m/2;(()=>{let t=0,e=0;this.buttons.dPadButtons.forEach((n=>{n.element.style.left=t*r+"px",n.element.style.top=e*r+"px",n.element.style.width=`${r}px`,n.element.style.height=`${r}px`,e=2===t?e+1:e,t=2!==t?t+1:0}))})();const E=d/1.5,x=E/1.2,y=d/3.5,B=c+d/2,P=o+h/2;this.screen.element.style.left=`${s}px`,this.screen.element.style.top=`${i}px`,this.buttons.dPadElement.style.left=`${u}px`,this.buttons.dPadElement.style.top=`${p}px`,this.buttons.dPadElement.style.width=`${m}px`,this.buttons.dPadElement.style.height=`${m}px`,this.buttons.dPadElement.style.left=`${u}px`,this.buttons.dPadElement.style.top=`${p}px`,this.buttons.dPadElement.style.width=`${m}px`,this.buttons.dPadElement.style.height=`${m}px`,this.buttons.actionBtnsElement.style.left=B-E/2+"px",this.buttons.actionBtnsElement.style.top=P-x/2+"px",this.buttons.actionBtnsElement.style.width=`${E}px`,this.buttons.actionBtnsElement.style.height=`${x}px`,this.buttons.actionBtnIElement.style.left="0",this.buttons.actionBtnIElement.style.top=x-y+"px",this.buttons.actionBtnIElement.style.width=`${y}px`,this.buttons.actionBtnIElement.style.height=`${y}px`,this.buttons.actionBtnIIElement.style.left=E-y+"px",this.buttons.actionBtnIIElement.style.top="0",this.buttons.actionBtnIIElement.style.width=`${y}px`,this.buttons.actionBtnIIElement.style.height=`${y}px`,this.leftConElement.style.left=`${l}px`,this.leftConElement.style.top=`${a}px`,this.leftConElement.style.width=`${d}px`,this.leftConElement.style.height=`${h}px`,this.rightConElement.style.left=`${c}px`,this.rightConElement.style.top=`${o}px`,this.rightConElement.style.width=`${d}px`,this.rightConElement.style.height=`${h}px`}}({buttons:i,screen:l});
//# sourceMappingURL=index.02a546d0.js.map
